namespace = secret_iceland_events

#Choosing our path
country_event = {
	id = secret_iceland_events.1
	title = "secret_iceland.events.1.t"
	desc = "secret_iceland.events.1.desc"
	fire_only_once = yes

	trigger = {
		tag = ICE
		all_owned_province = {
			base_tax = 7
			base_manpower = 7
			base_production = 7
		}
		NOT = {
			OR = {
				has_country_modifier = "secret_iceland_colonial_path"
				has_country_modifier = "secret_iceland_conquest_path"
				has_country_modifier = "secret_iceland_tall_path"
			}
		}
	}

	option = {
		name = "secret_iceland_events.1.a" #We should focus on exploring the world our ancestors always spoke of. (Colonial)
		add_country_modifier = {
			name = "secret_iceland_colonial_path"
			duration = -1
		}
		remove_country_modifier = "secret_iceland_modifiers"
	}
	option = {
		name = "secret_iceland_events.1.b" #We should focus on improving Icelandic identity. (Tall)
		add_country_modifier = {
			name = "secret_iceland_tall_path"
			duration = -1
		}
		
		370 = {
			center_of_trade = 1
		}
		371 = {
			add_center_of_trade_level = 1
		}

		remove_country_modifier = "secret_iceland_modifiers"
	}
	option = {
		name = "secret_iceland_events.1.c" #We shall unite our ancestors to one large nation. (Conquest)
		add_country_modifier = {
			name = "secret_iceland_conquest_path"
			duration = -1
		}
		add_permanent_claim = 1979
		add_permanent_claim = 1978
		add_permanent_claim = 23
		add_permanent_claim = 24
		add_permanent_claim = 2752
		add_permanent_claim = 20
		add_permanent_claim = 21

		remove_country_modifier = "secret_iceland_modifiers"
	}
}

#The trade for Iceland
country_event = {
	id = secret_iceland_events.2
	title = "secret_iceland_events.2.t"
	desc = "secret_iceland_events.2.desc"

	fire_only_once = yes

	trigger = {
		is_subject = no
		is_year = 1450
	}

	option = { #This surely sounds like a win-win situation.
		name = "secret_iceland_events.2.a"
		NOR = {
			add_liberty_desire = 100
			add_country_modifier = {
				name = preparations_for_independence
				duration = 3650
			}
			add_manpower = 10
		}
		DAN = {
			create_subject = {
				subject_type = march
				subject = ICE
			}

			1979 = {
				cede_province = ICE
			}
			1978 = {
				cede_province = ICE
			}
			23 = {
				cede_province = ICE
			}
			24 = {
				cede_province = ICE
			}
			2752 = {
				cede_province = ICE
			}
			20 = {
				cede_province = ICE
			}
			21 = {
				cede_province = ICE
			}
		}

		change_religion = catholic
		370 = {
			change_religion = catholic
		}
		371 = {
			change_religion = catholic
		}
		add_truce_with = DAN
	}
	option = { #We will never be slaves, we will be liberators.
		name = "secret_iceland_events.2.b"
		add_prestige = 50
		support_independence_of = NOR

		add_country_modifier = {
			name = never_slaves
			duration = 3650
		}

		add_historical_rival = DAN
		DAN = {
			add_historical_rival = ICE
		}
		NOR = {
			add_liberty_desire = 100
			add_opinion = {
				who = ICE
				modifier = iceland_norway_friends
		}
			add_country_modifier = {
				name = preparations_for_independence
				duration = 3650
			}
		create_admiral = {
			tradition = 80
		}

		galley = 17
		galley = 17
		galley = 17
		galley = 17
		galley = 17
		galley = 17
		galley = 17
		galley = 17
		galley = 17
		galley = 17

		add_manpower = 10
		add_historical_friend = ICE
		remove_historical_friend = DAN
		}
		add_opinion = {
			who = NOR
			modifier = iceland_norway_friends
		}
		add_historical_friend = ICE
		remove_historical_friend = DAN
		add_years_of_income = -3
	}

}

country_event = {
	id = secret_iceland_events.3
	title = "secret_iceland_events.3.t"
	desc = "secret_iceland_events.3.desc"
	
	trigger = {
		tag = ICE
		is_year = 1475

		NOT = {
			has_country_modifier = "secret_reduced_fish_yield"
		}

		370 = {
			trade_goods = fish
		}
	}

	option = { #Dark times are ahead.
		name = "secret_iceland_events.3.a"
		370 = {
			add_province_modifier = {
				name = "secret_reduced_fish_yield"
				duration = 3650
			}
		}
	}
	option = { #Invest in importing foreign goods
		name = "secret_iceland_events.3.b"

		add_years_of_income = -5

		370 = {
			add_province_modifier = {
				name = "secret_investing_in_foreign_goods"
				duration = 3650
			}
		}
		
	}
	option = { #We need to find another source of food.
		name = "secret_iceland_events.3.c"
		trigger = {
			370 = {
				base_production = 10
				base_tax = 6
				base_manpower = 6
			}
		}

		370 = {
			add_base_production = -7
			add_base_tax = -3
			add_base_manpower = -3
			change_trade_goods = livestock
			add_province_modifier = {
				name = "secret_investing_in_livestock"
				duration = 1825
			}
			remove_province_modifier = "icelanding_fisher_sea"
		}
	}

	mean_time_to_happen = {
		months = 600
	}
}